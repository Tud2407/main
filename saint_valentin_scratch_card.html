<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mission Saint‚ÄëValentin ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@300;600;800&display=swap" rel="stylesheet">

<style>
/* ================= GLOBAL STYLES ================= */
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:radial-gradient(circle at top,#ffb6d9,#ff4da6);
  text-align:center;
  overflow-x:hidden; /* allow vertical scroll */
}

h1{
  font-family:'Pacifico',cursive;
  font-size:3.2em;
  color:white;
  margin-top:40px;
  opacity:0;
  transform:translateY(-20px);
  transition:1s;
}

h1.show{opacity:1;transform:translateY(0);} 

/* ================= FINAL CONTENT ================= */
.content{
  display:none;
  padding:40px 20px 80px 20px;
  animation:fadeIn 1.2s ease forwards;
}

@keyframes fadeIn{
  from{opacity:0;transform:scale(.95);} 
  to{opacity:1;transform:scale(1);} 
}

.photos{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:20px;
  margin-top:20px;
}

.photos img{
  width:250px;
  border-radius:25px;
  box-shadow:0 20px 40px rgba(0,0,0,.3);
  transition:.4s;
}

.photos img:hover{transform:scale(1.08) rotate(2deg);} 

.poem{
  background:rgba(255,255,255,.95);
  padding:35px;
  border-radius:25px;
  margin:40px auto;
  width:70%;
  max-width:800px;
  font-size:1.2em;
  color:#d1006f;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
  line-height:1.7em;
}

/* ================= SCRATCH ================= */
canvas{position:fixed;top:0;left:0;z-index:10;cursor:pointer;}

.overlay-text{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  color:white;
  font-size:2em;
  font-weight:800;
  text-shadow:0 0 20px rgba(0,0,0,.4);
  z-index:11;
  animation:blink 1.2s infinite;
  pointer-events:none;
}

@keyframes blink{0%,100%{opacity:1;}50%{opacity:.6;}}

#confettiCanvas{position:fixed;top:0;left:0;pointer-events:none;z-index:20;}

/* ================= QUIZ ================= */
.quiz-container{
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:white;
  padding:35px;
  border-radius:25px;
  width:90%;
  max-width:700px;
  box-shadow:0 20px 50px rgba(0,0,0,.3);
  z-index:15;
  animation:fadeIn .6s ease;
}

.quiz-title{
  font-family:'Pacifico',cursive;
  font-size:1.8em;
  color:#ff2f92;
  margin-bottom:15px;
}

.quiz-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
  font-weight:600;
}

.progress-bar{
  height:8px;
  background:#ffd6ec;
  border-radius:10px;
  overflow:hidden;
  margin-bottom:15px;
}

.progress{
  height:100%;
  width:0%;
  background:#ff2f92;
  transition:.4s;
}

.timer{color:#ff2f92;font-weight:800;}

.quiz-question{
  font-weight:800;
  font-size:1.2em;
  margin:15px 0;
  color:#ff2f92;
}

.quiz-options button{
  display:block;
  width:100%;
  margin:8px 0;
  padding:12px;
  border:none;
  border-radius:15px;
  font-weight:600;
  cursor:pointer;
  background:#ffd6ec;
  transition:.3s;
}

.quiz-options button:hover{
  background:#ff9ec4;
  transform:scale(1.05);
}

.result-emoji{
  font-size:2em;
  margin-top:15px;
  min-height:40px;
}

</style>
</head>
<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>
<body>

<h1 id="title">üéâ Tu as d√©bloqu√© ton cadeau üéâ</h1>

<div class="content" id="mainContent">
  <div class="photos">
    <img src="photo1.jpg" />
    <img src="photo2.jpg" />
    <img src="photo3.jpg" />
  </div>

  <div class="poem">
    L√©a,<br/><br/>
    Si notre couple √©tait une s√©rie Netflix,<br/>
    Tu serais clairement le personnage principal‚Ä¶<br/>
    Et moi celui qui dit "allez encore un √©pisode"<br/>
    alors qu‚Äôon sait tr√®s bien que tu ne tiendras pas jusqu‚Äôau g√©n√©rique üòå<br/><br/>

    Tu es mon b√©b√© cadum pr√©f√©r√©,<br/>
    Ma drama queen quand tu as faim,<br/>
    Ma partenaire de brunch, de sport, de fous rires et de projets toujours plus ambitieux<br/><br/>

    Avec toi, m√™me faire les courses devient une aventure,<br/>
    M√™me ne rien faire devient un souvenir<br/><br/>

    Je ne te promets pas d‚Äô√™tre parfait<br/>
    Je te promets d‚Äô√™tre l√†<br/>
    De rire avec toi<br/>
    De te soutenir<br/>
    De te choisir encore et encore<br/><br/>

    Et si un jour on doit √©lire qui aime le plus fort‚Ä¶<br/>
    On trichera tous les deux.<br/>
    Parce que c‚Äôest nous contre le reste du monde ‚ù§Ô∏è
  </div>
</div>

<div class="overlay-text">Gratte pour lancer le QUIZ ULTIME DE LA MEILLEURE PETITE AMIE üíò</div>
<canvas id="scratchCanvas"></canvas>
<canvas id="confettiCanvas"></canvas>

<div class="quiz-container" id="quizBox">
  <div class="quiz-title">üíñ Le Grand D√©fi de L√©a üíñ</div>

  <div class="quiz-header">
    <div>Question <span id="qNumber">1</span>/5</div>
    <div class="timer">‚è≥ <span id="time">24</span>s</div>
  </div>

  <div class="progress-bar"><div class="progress" id="progress"></div></div>

  <div class="quiz-question" id="question"></div>
  <div class="quiz-options" id="options"></div>
  <div class="result-emoji" id="emoji"></div>
</div>

<script>

/* ================= QUIZ DATA ================= */
const QuizApp = (() => {

  const questions=[
    {q:"Qui met 45 minutes √† choisir un film alors que quelqu'un ne tiendra m√™me pas jusqu‚Äô√† la fin ?",options:["Tudor","L√©a","Leonardo DiCaprio","Un lama cin√©phile"],answer:0},
    {q:"Qui est le plus boudeur ?",options:["Tudor","L√©a","Dark Vador","Un chat vex√©"],answer:0},
    {q:"Qui est le plus gros b√©b√© cadum ?",options:["Tudor","L√©a","Brad Pitt","Un toutou sensible"],answer:1},
    {q:"Qui m√©rite une √©toile Michelin pour ses plats super bien condiment√©s ?",options:["Tudor","L√©a","Philippe Etchebest","Ratatouille"],answer:2},
    {q:"Qui aime le plus fort dans ce couple ?",options:["Tudor","L√©a","Les deux √† l‚Äôinfini","Beyonc√©"],answer:2}
  ];

  let current=0,score=0,timerInterval,timeLeft=24;

  const elements={
    quizBox:document.getElementById('quizBox'),
    question:document.getElementById('question'),
    options:document.getElementById('options'),
    progress:document.getElementById('progress'),
    qNumber:document.getElementById('qNumber'),
    time:document.getElementById('time'),
    emoji:document.getElementById('emoji')
  };

  function start(){
    elements.quizBox.style.display='block';
    showQuestion();
  }

  function showQuestion(){
    if(current>=questions.length) return end();

    const q=questions[current];
    elements.qNumber.innerText=current+1;
    elements.question.innerText=q.q;
    elements.progress.style.width=(current/questions.length)*100+'%';
    elements.options.innerHTML='';
    elements.emoji.innerHTML='';

    q.options.forEach((opt,i)=>{
      const btn=document.createElement('button');
      btn.innerText=opt;
      btn.onclick=()=>checkAnswer(i);
      elements.options.appendChild(btn);
    });

    startTimer();
  }

  function startTimer(){
    timeLeft=24;
    elements.time.innerText=timeLeft;
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
      timeLeft--;
      elements.time.innerText=timeLeft;
      if(timeLeft<=0){
        clearInterval(timerInterval);
        checkAnswer(-1);
      }
    },1000);
  }

  function checkAnswer(i){
    clearInterval(timerInterval);
    const correct=questions[current].answer;
    elements.emoji.innerHTML='‚è≥ Suspense...';

    setTimeout(()=>{
      if(i===correct){
        score++;
        elements.emoji.innerHTML='üéâ Bonne r√©ponse !';
      }else{
        elements.emoji.innerHTML='üòÇ Faux ! R√©ponse : '+questions[current].options[correct];
      }

      setTimeout(()=>{
        current++;
        showQuestion();
      },2000);

    },800);
  }

  function end(){
    elements.quizBox.innerHTML='<h2>Score final : '+score+'/5</h2>';

    const msg=document.createElement('div');
    msg.style.marginTop='15px';

    if(score>=3){
      msg.innerHTML='üî• Incroyable ! Tu d√©bloques la surprise üòè';
    }else{
      msg.innerHTML='Tu feras mieux la prochaine fois‚Ä¶ mais je t‚Äôaime quand m√™me ‚ù§Ô∏è';
    }

    elements.quizBox.appendChild(msg);

    setTimeout(()=>{
      elements.quizBox.style.display='none';
      revealFinal();
    },3000);
  }

  return { start };
})();

/* ================= SCRATCH ================= */
const scratchCanvas=document.getElementById('scratchCanvas');
const ctx=scratchCanvas.getContext('2d');

function resize(){
  scratchCanvas.width=window.innerWidth;
  scratchCanvas.height=window.innerHeight;
  ctx.fillStyle='#ff2f92';
  ctx.fillRect(0,0,scratchCanvas.width,scratchCanvas.height);
}
resize();

let drawing=false;

function scratch(x,y){
  ctx.globalCompositeOperation='destination-out';
  ctx.beginPath();
  ctx.arc(x,y,80,0,Math.PI*2);
  ctx.fill();
}

scratchCanvas.addEventListener('mousedown',()=>drawing=true);
scratchCanvas.addEventListener('mouseup',()=>drawing=false);
scratchCanvas.addEventListener('mousemove',e=>{
  if(!drawing)return;
  scratch(e.clientX,e.clientY);
  checkReveal();
});

function checkReveal(){
  const d=ctx.getImageData(0,0,scratchCanvas.width,scratchCanvas.height);
  let transparent=0;
  for(let i=3;i<d.data.length;i+=4){
    if(d.data[i]===0) transparent++;
  }
  if(transparent/(scratchCanvas.width*scratchCanvas.height)>.2){
    scratchCanvas.style.display='none';
    document.querySelector('.overlay-text').style.display='none';
    QuizApp.start();
    const music = document.getElementById("bgMusic");
    music.volume = 0.6;
    music.play().catch(()=>{});
  }
}

/* ================= FINAL REVEAL ================= */
function revealFinal(){
  document.getElementById('mainContent').style.display='block';
  document.getElementById('title').classList.add('show');
  launchConfetti();
}

/* ================= CONFETTI ================= */
const confettiCanvas=document.getElementById('confettiCanvas');
const confettiCtx=confettiCanvas.getContext('2d');
confettiCanvas.width=window.innerWidth;
confettiCanvas.height=window.innerHeight;

const confetti=[];
for(let i=0;i<150;i++){
  confetti.push({
    x:Math.random()*confettiCanvas.width,
    y:Math.random()*confettiCanvas.height-confettiCanvas.height,
    r:Math.random()*6+4
  });
}

function drawConfetti(){
  confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  confetti.forEach(c=>{
    confettiCtx.beginPath();
    confettiCtx.arc(c.x,c.y,c.r,0,Math.PI*2);
    confettiCtx.fillStyle=`hsl(${Math.random()*360},100%,60%)`;
    confettiCtx.fill();
    c.y+=2;
    if(c.y>confettiCanvas.height) c.y=-10;
  });
}

function launchConfetti(){
  setInterval(drawConfetti,20);
}

</script>
</body>
</html>
